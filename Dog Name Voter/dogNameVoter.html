<!doctype html>
<html>
    <head>
        <title>Dog Name Voter</title> 
        <link rel="stylesheet" type="text/css" href="reset.css">
        <link rel="stylesheet" type="text/css" href="style.css">
        <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
        <script>
        var vote_map = {}
        var main = function () {"use strict";
                var addVoteFromInputBox = function () {
                    var $vote;
                    if ($(".comment-input input").val() !== "") {// Testing that input box is non empty
                        if(vote_map[$(".comment-input input").val()] != undefined) { //If dog name has been voted for previously
                        	
                        	$("#" + $(".comment-input input").val()).remove();

                        	console.log($(".comment-input input").val());

                            vote_map[$(".comment-input input").val()] += 1;

                            $vote = $("<p id =" + $(".comment-input input").val() + ">").text($(".comment-input input").val());
                            $vote.append(" has " + vote_map[$(".comment-input input").val()] + " votes.");
                            

                            $(".comments").prepend($vote);
                            $vote.fadeIn();
                            $(".comment-input input").val("");
                            
                            $(".comments").prepend($vote);

                            $(".comment-input input").val("");


                        }else{ //If dog name has not yet been voted for
                            console.log(vote_map[$(".comment-input input").val()])
                            console.log($(".comment-input input").val() in vote_map); 
                            vote_map[$(".comment-input input").val()] = 1;

                            console.log(vote_map[$(".comment-input input").val()])                     

                            $vote = $("<p id =" + $(".comment-input input").val() + ">").text($(".comment-input input").val());
                            $vote.append(" has " + vote_map[$(".comment-input input").val()] + " vote.") ;

                            $vote.hide(); 
                            $vote.prepend()
                            $(".comments").prepend($vote);
                            $vote.fadeIn();
                            $(".comment-input input").val("");

                        }

                    }

                };

                $(".comment-input button").on("click", function (event) {
                    addVoteFromInputBox();
                });

                $(".comment-input input").on("keypress", function (event) {
                    if (event.keyCode === 13) {
                        addVoteFromInputBox();
                    }
                    });
            };
            $(document).ready(main);
        </script>
    </head>
    <body>
        <header>
            <h1>Dog Name Voter</h1>
            <p>An app that counts votes for different dog names.</p>
        </header>

        <main>
            <section class='comment-input'>
            <h2>Add Your Vote:</h2>
            <input><button>+</button>
            </section>
            <h2>Voting Log</h2>
            <section class='comments'>

            </section>
        </main>

        <footer>
            <p><a href="http://www.davecotechsupport.com">www.davecotechsupport.com</a></p>
        </footer>
    </body>
</html>